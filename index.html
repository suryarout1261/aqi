import tensorflow as tf
from sklearn.ensemble import RandomForestRegressor
from sklearn.preprocessing import StandardScaler
import pickle

# Load your .pkl files
with open('rf_model.pkl', 'rb') as f:
    rf_model = pickle.load(f)

with open('scaler (1).pkl', 'rb') as f:
    scaler = pickle.load(f)

# Convert the model to TensorFlow format
import tf2onnx
import onnx
import tensorflowjs as tfjs

# Convert RandomForest model to ONNX format
import skl2onnx
from skl2onnx import convert_sklearn
from skl2onnx.common.data_types import FloatTensorType

initial_type = [('float_input', FloatTensorType([None, 7]))]  # Assuming 7 input features
onnx_model = convert_sklearn(rf_model, initial_types=initial_type)

# Save ONNX model
onnx.save_model(onnx_model, "rf_model.onnx")

# Convert ONNX to TensorFlow
import onnx_tf
from onnx_tf.backend import prepare

tf_rep = prepare(onnx_model)
tf_rep.export_graph("rf_model.pb")

# Convert TensorFlow model to TensorFlow.js format
tfjs.converters.convert_tf_saved_model("rf_model.pb", "web_model")